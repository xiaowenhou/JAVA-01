**第一课第三题：**

![image-20210113165437473](C:\Users\xiaowenhou\AppData\Roaming\Typora\typora-user-images\image-20210113165437473.png)

根据群中大家的讨论， 加上又查了一些资料，对该图做补充

1. -Xss设定的是每个线程栈的大小， 和能够创建多少个线程没有关系， 创建线程， 线程的对象是在堆上存储的，该大小和该线程能够调用的方法深度有关，当线程在调用方法时，方法是一个个压栈，然后执行完毕之后再出栈，-Xss决定了线程中能够压多少方法入栈，-Xss的值大一些， 则能够支持的方法调用链就更长，否则，方法的调用链就更短

2. 非堆，方法区，MetaSpace、本地内存，直接内存之间的关系

   ​    方法区也是线程可以共享的内存区域，用于存储虚拟机加载的类型信息、常量、静态变量、JIT后的代码缓存，也叫非堆。jconsole中没有方法区的概念，只有非堆的概念，非堆中包括MetaSpace，JIT即时编译后的代码缓存，类压缩信息。

   ​	MetaSpace中包括了运行时常量池，运行时常量池中包括了class文件加载时的字面量和符号引用，这些信息保存在本地内存中，不做限制的话默认是整个物理内存的大小。

   ​	直接内存则不属于运行时数据区， 但是在JVM中确实存在，是为了提高NIO在本地内存和堆内存之间拷贝对象的效率而设置的，其不受GC管理，但是收到JVM进程的管理，可以通过参数限制最大直接内存的大小。直接内存中的引用是由存储在堆内存中的DirectByteBuffer对象所持有的，可以通过操作DIrectByteBuffer对象操作直接内存。